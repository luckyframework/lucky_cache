{"repository_name":"lucky_cache","body":"# LuckyCache\n\nCache content within your Lucky application.\n\n## Installation\n\n1. Add the dependency to your `shard.yml`:\n\n   ```yaml\n   dependencies:\n     lucky_cache:\n       github: luckyframework/lucky_cache\n   ```\n\n2. Run `shards install`\n\n## Usage\n\n```crystal\nrequire \"lucky_cache\"\n\nLuckyCache.configure do |settings|\n  settings.storage = LuckyCache::MemoryStore.new\n  settings.default_duration = 5.minutes\nend\n\nclass SomeObject\n  include LuckyCache::Cachable\nend\n\ncache = LuckyCache.settings.storage\nsome_object = cache.fetch(\"some_key\", as: SomeObject) do\n  SomeObject.new\nend\n```\n\n### Page fragment cache\n\nYou can cache portions of your page by including the `LuckyCache::HtmlHelpers` module\nin your Page class, and use the `cache()` helper method.\n\n```crystal\nclass Posts::ShowPage < MainLayout\n  include LuckyCache::HtmlHelpers\n  needs post : Post\n\n  def content\n    cache(\"post:#{post.id}:comments\", expires_in: 1.hour) do\n      post.comments.each do |comment|\n        div comment.text\n      end\n    end\n  end\nend\n```\n\n## Development\n\n\n\n## Contributing\n\n1. Fork it (<https://github.com/luckyframework/lucky_cache/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n## Contributors\n\n- [Jeremy Woertink](https://github.com/jwoertink) - maintainer\n\n## Thanks & attributions\n\n* Initial structure and some code was pulled from the original LuckyCache by [@matthewmcgarvey](https://github.com/matthewmcgarvey/lucky_cache).\n* Lots of inspiration on Cache store was from [@mamantoha](https://github.com/crystal-cache/cache)\n","program":{"html_id":"lucky_cache/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"lucky_cache","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"lucky_cache/LuckyCache","path":"LuckyCache.html","kind":"module","full_name":"LuckyCache","name":"LuckyCache","abstract":false,"ancestors":[{"html_id":"lucky_cache/Habitat/SettingsHelpers","kind":"module","full_name":"Habitat::SettingsHelpers","name":"SettingsHelpers"},{"html_id":"lucky_cache/Habitat/TempConfig","kind":"module","full_name":"Habitat::TempConfig","name":"TempConfig"}],"locations":[{"filename":"src/lucky_cache.cr","line_number":10,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache.cr#L10"},{"filename":"src/lucky_cache/cachable.cr","line_number":2,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/cachable.cr#L2"},{"filename":"src/lucky_cache/cache_item.cr","line_number":1,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/cache_item.cr#L1"},{"filename":"src/lucky_cache/stores/base_store.cr","line_number":1,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L1"},{"filename":"src/lucky_cache/stores/memory_store.cr","line_number":1,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/memory_store.cr#L1"},{"filename":"src/lucky_cache/stores/null_store.cr","line_number":1,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/null_store.cr#L1"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"HABITAT_SETTINGS","name":"HABITAT_SETTINGS","value":"[{decl: storage : LuckyCache::BaseStore = LuckyCache::NullStore.new, example: nil, validation: nil}, {decl: default_duration : Time::Span = 1.minute, example: nil, validation: nil}] of Nil"},{"id":"VERSION","name":"VERSION","value":"\"0.1.0\""}],"included_modules":[{"html_id":"lucky_cache/Habitat/SettingsHelpers","kind":"module","full_name":"Habitat::SettingsHelpers","name":"SettingsHelpers"},{"html_id":"lucky_cache/Habitat/TempConfig","kind":"module","full_name":"Habitat::TempConfig","name":"TempConfig"}],"class_methods":[{"html_id":"configure(&)-class-method","name":"configure","abstract":false,"location":{"filename":"src/lucky_cache.cr","line_number":13,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache.cr#L13"},"def":{"name":"configure","yields":1,"visibility":"Public","body":"yield settings"}},{"html_id":"settings-class-method","name":"settings","abstract":false,"location":{"filename":"src/lucky_cache.cr","line_number":13,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache.cr#L13"},"def":{"name":"settings","visibility":"Public","body":"HabitatSettings"}}],"instance_methods":[{"html_id":"settings-instance-method","name":"settings","abstract":false,"location":{"filename":"src/lucky_cache.cr","line_number":13,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache.cr#L13"},"def":{"name":"settings","visibility":"Public","body":"HabitatSettings"}}],"types":[{"html_id":"lucky_cache/LuckyCache/BaseStore","path":"LuckyCache/BaseStore.html","kind":"struct","full_name":"LuckyCache::BaseStore","name":"BaseStore","abstract":true,"superclass":{"html_id":"lucky_cache/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"lucky_cache/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"lucky_cache/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"lucky_cache/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/lucky_cache/stores/base_store.cr","line_number":2,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L2"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"lucky_cache/LuckyCache/MemoryStore","kind":"struct","full_name":"LuckyCache::MemoryStore","name":"MemoryStore"},{"html_id":"lucky_cache/LuckyCache/NullStore","kind":"struct","full_name":"LuckyCache::NullStore","name":"NullStore"}],"namespace":{"html_id":"lucky_cache/LuckyCache","kind":"module","full_name":"LuckyCache","name":"LuckyCache"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/lucky_cache/stores/base_store.cr","line_number":2,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L2"},"def":{"name":"new","visibility":"Public","body":"x = allocate\nif x.responds_to?(:finalize)\n  ::GC.add_finalizer(x)\nend\nx\n"}}],"instance_methods":[{"html_id":"delete(key:CacheKey)-instance-method","name":"delete","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"args_string":"(key : CacheKey)","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>)","location":{"filename":"src/lucky_cache/stores/base_store.cr","line_number":9,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L9"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"visibility":"Public","body":""}},{"html_id":"fetch(key:CacheKey,*,as:Array(T).class,expires_in:Time::Span=LuckyCache.settings.default_duration,&)forallT-instance-method","name":"fetch","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"Array(T).class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(key : CacheKey, *, as : Array(T).class, expires_in : Time::Span = LuckyCache.settings.default_duration, &) forall T","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>, *, as : <span class=\"t\">Array</span>(<span class=\"t\">T</span>).<span class=\"k\">class</span>, expires_in : Time::Span = <span class=\"t\">LuckyCache</span>.settings.default_duration, &) forall T","location":{"filename":"src/lucky_cache/stores/base_store.cr","line_number":13,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L13"},"def":{"name":"fetch","args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"Array(T).class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"splat_index":1,"yields":0,"visibility":"Public","body":""}},{"html_id":"fetch(key:CacheKey,*,as:T.class,expires_in:Time::Span=LuckyCache.settings.default_duration,&)forallT-instance-method","name":"fetch","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"T.class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(key : CacheKey, *, as : T.class, expires_in : Time::Span = LuckyCache.settings.default_duration, &) forall T","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>, *, as : <span class=\"t\">T</span>.<span class=\"k\">class</span>, expires_in : Time::Span = <span class=\"t\">LuckyCache</span>.settings.default_duration, &) forall T","location":{"filename":"src/lucky_cache/stores/base_store.cr","line_number":15,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L15"},"def":{"name":"fetch","args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"T.class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"splat_index":1,"yields":0,"visibility":"Public","body":""}},{"html_id":"flush:Nil-instance-method","name":"flush","abstract":true,"location":{"filename":"src/lucky_cache/stores/base_store.cr","line_number":11,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L11"},"def":{"name":"flush","return_type":"Nil","visibility":"Public","body":""}},{"html_id":"initialize-instance-method","name":"initialize","abstract":false,"location":{"filename":"src/lucky_cache/stores/base_store.cr","line_number":2,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L2"},"def":{"name":"initialize","visibility":"Public","body":""}},{"html_id":"read(key:CacheKey):CacheItem?-instance-method","name":"read","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"args_string":"(key : CacheKey) : CacheItem?","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>) : <a href=\"../LuckyCache/CacheItem.html\">CacheItem</a>?","location":{"filename":"src/lucky_cache/stores/base_store.cr","line_number":5,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L5"},"def":{"name":"read","args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"return_type":"CacheItem | ::Nil","visibility":"Public","body":""}},{"html_id":"write(key:CacheKey,*,expires_in:Time::Span=LuckyCache.settings.default_duration,&)-instance-method","name":"write","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(key : CacheKey, *, expires_in : Time::Span = LuckyCache.settings.default_duration, &)","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>, *, expires_in : Time::Span = <span class=\"t\">LuckyCache</span>.settings.default_duration, &)","location":{"filename":"src/lucky_cache/stores/base_store.cr","line_number":7,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L7"},"def":{"name":"write","args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"splat_index":1,"yields":0,"visibility":"Public","body":""}}],"types":[{"html_id":"lucky_cache/LuckyCache/BaseStore/CacheKey","path":"LuckyCache/BaseStore/CacheKey.html","kind":"alias","full_name":"LuckyCache::BaseStore::CacheKey","name":"CacheKey","abstract":false,"locations":[{"filename":"src/lucky_cache/stores/base_store.cr","line_number":3,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/base_store.cr#L3"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":true,"aliased":"String","aliased_html":"String","const":false,"namespace":{"html_id":"lucky_cache/LuckyCache/BaseStore","kind":"struct","full_name":"LuckyCache::BaseStore","name":"BaseStore"}}]},{"html_id":"lucky_cache/LuckyCache/Cachable","path":"LuckyCache/Cachable.html","kind":"module","full_name":"LuckyCache::Cachable","name":"Cachable","abstract":false,"locations":[{"filename":"src/lucky_cache/cachable.cr","line_number":2,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/cachable.cr#L2"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"lucky_cache/LuckyCache","kind":"module","full_name":"LuckyCache","name":"LuckyCache"},"doc":"Include this module in the custom types you want to cache","summary":"<p>Include this module in the custom types you want to cache</p>"},{"html_id":"lucky_cache/LuckyCache/CachableTypes","path":"LuckyCache/CachableTypes.html","kind":"alias","full_name":"LuckyCache::CachableTypes","name":"CachableTypes","abstract":false,"locations":[{"filename":"src/lucky_cache.cr","line_number":18,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache.cr#L18"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":true,"aliased":"(Array(Bool) | Array(Float64) | Array(Int32) | Array(Int64) | Array(LuckyCache::Cachable) | Array(String) | Bool | Float64 | Int32 | Int64 | JSON::Any | LuckyCache::Cachable | String | Time | UUID)","aliased_html":"Array(Bool) | Array(Float64) | Array(Int32) | Array(Int64) | Array(<a href=\"../LuckyCache/Cachable.html\">LuckyCache::Cachable</a>) | Array(String) | Bool | Float64 | Int32 | Int64 | JSON::Any | <a href=\"../LuckyCache/Cachable.html\">LuckyCache::Cachable</a> | String | Time | UUID","const":false,"namespace":{"html_id":"lucky_cache/LuckyCache","kind":"module","full_name":"LuckyCache","name":"LuckyCache"}},{"html_id":"lucky_cache/LuckyCache/CacheItem","path":"LuckyCache/CacheItem.html","kind":"struct","full_name":"LuckyCache::CacheItem","name":"CacheItem","abstract":false,"superclass":{"html_id":"lucky_cache/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"lucky_cache/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"lucky_cache/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"lucky_cache/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/lucky_cache/cache_item.cr","line_number":2,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/cache_item.cr#L2"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"lucky_cache/LuckyCache","kind":"module","full_name":"LuckyCache","name":"LuckyCache"},"constructors":[{"html_id":"new(value:CachableTypes,expires_in:Time::Span)-class-method","name":"new","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"CachableTypes"},{"name":"expires_in","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(value : CachableTypes, expires_in : Time::Span)","args_html":"(value : <a href=\"../LuckyCache/CachableTypes.html\">CachableTypes</a>, expires_in : Time::Span)","location":{"filename":"src/lucky_cache/cache_item.cr","line_number":7,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/cache_item.cr#L7"},"def":{"name":"new","args":[{"name":"value","external_name":"value","restriction":"CachableTypes"},{"name":"expires_in","external_name":"expires_in","restriction":"Time::Span"}],"visibility":"Public","body":"_ = allocate\n_.initialize(value, expires_in)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"expired?-instance-method","name":"expired?","abstract":false,"location":{"filename":"src/lucky_cache/cache_item.cr","line_number":11,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/cache_item.cr#L11"},"def":{"name":"expired?","visibility":"Public","body":"expiration < Time.utc"}},{"html_id":"expires_in:Time::Span-instance-method","name":"expires_in","abstract":false,"location":{"filename":"src/lucky_cache/cache_item.cr","line_number":4,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/cache_item.cr#L4"},"def":{"name":"expires_in","return_type":"Time::Span","visibility":"Public","body":"@expires_in"}},{"html_id":"value:CachableTypes-instance-method","name":"value","abstract":false,"location":{"filename":"src/lucky_cache/cache_item.cr","line_number":3,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/cache_item.cr#L3"},"def":{"name":"value","return_type":"CachableTypes","visibility":"Public","body":"@value"}}]},{"html_id":"lucky_cache/LuckyCache/HabitatSettings","path":"LuckyCache/HabitatSettings.html","kind":"class","full_name":"LuckyCache::HabitatSettings","name":"HabitatSettings","abstract":false,"superclass":{"html_id":"lucky_cache/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"lucky_cache/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_cache/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/lucky_cache.cr","line_number":13,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache.cr#L13"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"lucky_cache/LuckyCache","kind":"module","full_name":"LuckyCache","name":"LuckyCache"},"class_methods":[{"html_id":"default_duration:Time::Span-class-method","name":"default_duration","abstract":false,"def":{"name":"default_duration","return_type":"Time::Span","visibility":"Public","body":"@@default_duration.not_nil!"}},{"html_id":"default_duration=(value:Time::Span)-class-method","name":"default_duration=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Time::Span"}],"args_string":"(value : Time::Span)","args_html":"(value : Time::Span)","def":{"name":"default_duration=","args":[{"name":"value","external_name":"value","restriction":"Time::Span"}],"visibility":"Public","body":"@@default_duration = value"}},{"html_id":"default_duration?-class-method","name":"default_duration?","doc":"Used for checking missing settings on non-nilable types\nIt's advised to use default_duration in your apps to ensure\nthe propper type is checked.","summary":"<p>Used for checking missing settings on non-nilable types It's advised to use default_duration in your apps to ensure the propper type is checked.</p>","abstract":false,"def":{"name":"default_duration?","visibility":"Public","body":"@@default_duration"}},{"html_id":"storage:LuckyCache::BaseStore-class-method","name":"storage","abstract":false,"def":{"name":"storage","return_type":"LuckyCache::BaseStore","visibility":"Public","body":"@@storage.not_nil!"}},{"html_id":"storage=(value:LuckyCache::BaseStore)-class-method","name":"storage=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"LuckyCache::BaseStore"}],"args_string":"(value : LuckyCache::BaseStore)","args_html":"(value : <a href=\"../LuckyCache/BaseStore.html\">LuckyCache::BaseStore</a>)","def":{"name":"storage=","args":[{"name":"value","external_name":"value","restriction":"LuckyCache::BaseStore"}],"visibility":"Public","body":"@@storage = value"}},{"html_id":"storage?-class-method","name":"storage?","doc":"Used for checking missing settings on non-nilable types\nIt's advised to use storage in your apps to ensure\nthe propper type is checked.","summary":"<p>Used for checking missing settings on non-nilable types It's advised to use storage in your apps to ensure the propper type is checked.</p>","abstract":false,"def":{"name":"storage?","visibility":"Public","body":"@@storage"}},{"html_id":"to_h-class-method","name":"to_h","doc":"Generates a hash using the provided values","summary":"<p>Generates a hash using the provided values</p>","abstract":false,"def":{"name":"to_h","visibility":"Public","body":"{\"storage\" => storage, \"default_duration\" => default_duration}"}}]},{"html_id":"lucky_cache/LuckyCache/HtmlHelpers","path":"LuckyCache/HtmlHelpers.html","kind":"module","full_name":"LuckyCache::HtmlHelpers","name":"HtmlHelpers","abstract":false,"locations":[{"filename":"src/lucky_cache/html_helpers.cr","line_number":1,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/html_helpers.cr#L1"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"lucky_cache/LuckyCache","kind":"module","full_name":"LuckyCache","name":"LuckyCache"},"instance_methods":[{"html_id":"cache(key,*,expires_in:Time::Span?,&)-instance-method","name":"cache","doc":"Use this in your Lucky Page class.\n\n```\ncache(\"some_key\", expires_in: 5.minutes) do\n  div do\n    text \"Data\"\n  end\nend\n```","summary":"<p>Use this in your Lucky Page class.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""},{"name":"","external_name":"","restriction":""},{"name":"expires_in","external_name":"expires_in","restriction":"Time::Span | ::Nil"}],"args_string":"(key, *, expires_in : Time::Span?, &)","args_html":"(key, *, expires_in : Time::Span?, &)","location":{"filename":"src/lucky_cache/html_helpers.cr","line_number":11,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/html_helpers.cr#L11"},"def":{"name":"cache","args":[{"name":"key","external_name":"key","restriction":""},{"name":"","external_name":"","restriction":""},{"name":"expires_in","external_name":"expires_in","restriction":"Time::Span | ::Nil"}],"splat_index":1,"yields":0,"visibility":"Public","body":"cache = LuckyCache.settings.storage\nexpires = expires_in || LuckyCache.settings.default_duration\ncached_html = cache.read(key)\nif cached_html\n  raw(cached_html.value.as(String))\nelse\n  original_view = @view\n  @view = IO::Memory.new\n  check_tag_content!(yield)\n  html_fragment = @view.to_s\n  cache.write(key, expires_in: expires) do\n    html_fragment\n  end\n  @view = original_view\n  raw(html_fragment)\nend\n"}}]},{"html_id":"lucky_cache/LuckyCache/MemoryStore","path":"LuckyCache/MemoryStore.html","kind":"struct","full_name":"LuckyCache::MemoryStore","name":"MemoryStore","abstract":false,"superclass":{"html_id":"lucky_cache/LuckyCache/BaseStore","kind":"struct","full_name":"LuckyCache::BaseStore","name":"BaseStore"},"ancestors":[{"html_id":"lucky_cache/LuckyCache/BaseStore","kind":"struct","full_name":"LuckyCache::BaseStore","name":"BaseStore"},{"html_id":"lucky_cache/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"lucky_cache/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"lucky_cache/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/lucky_cache/stores/memory_store.cr","line_number":2,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/memory_store.cr#L2"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"lucky_cache/LuckyCache","kind":"module","full_name":"LuckyCache","name":"LuckyCache"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/lucky_cache/stores/memory_store.cr","line_number":5,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/memory_store.cr#L5"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"delete(key:CacheKey)-instance-method","name":"delete","doc":"Deletes `key` from the cache","summary":"<p>Deletes <code>key</code> from the cache</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"args_string":"(key : CacheKey)","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>)","location":{"filename":"src/lucky_cache/stores/memory_store.cr","line_number":37,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/memory_store.cr#L37"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"visibility":"Public","body":"cache.delete(key)"}},{"html_id":"fetch(key:CacheKey,*,as:Array(T).class,expires_in:Time::Span=LuckyCache.settings.default_duration,&)forallT-instance-method","name":"fetch","doc":"If the `CacheItem` exists, it will map the `Array(Cachable)`\nin to `Array(T)`. If no item is found, write the block value\nand return the block value","summary":"<p>If the <code><a href=\"../LuckyCache/CacheItem.html\">CacheItem</a></code> exists, it will map the <code>Array(<a href=\"../LuckyCache/Cachable.html\">Cachable</a>)</code> in to <code>Array(T)</code>.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"Array(T).class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(key : CacheKey, *, as : Array(T).class, expires_in : Time::Span = LuckyCache.settings.default_duration, &) forall T","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>, *, as : <span class=\"t\">Array</span>(<span class=\"t\">T</span>).<span class=\"k\">class</span>, expires_in : Time::Span = <span class=\"t\">LuckyCache</span>.settings.default_duration, &) forall T","location":{"filename":"src/lucky_cache/stores/memory_store.cr","line_number":49,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/memory_store.cr#L49"},"def":{"name":"fetch","args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"Array(T).class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"splat_index":1,"yields":0,"visibility":"Public","body":"if cache_item = read(key)\n  new_array = Array(T).new\n  (cache_item.value.as(Array(LuckyCache::Cachable))).each do |v|\n    new_array << (v.as(T))\n  end\n  new_array\nelse\n  write(key, expires_in: expires_in) do\n    yield\n  end\nend"}},{"html_id":"fetch(key:CacheKey,*,as:T.class,expires_in:Time::Span=LuckyCache.settings.default_duration,&)forallT-instance-method","name":"fetch","doc":"If the `CacheItem` exists, it will cast the `Cachable`\nin to `T`. If no item is found, write the block value\nand return the block value","summary":"<p>If the <code><a href=\"../LuckyCache/CacheItem.html\">CacheItem</a></code> exists, it will cast the <code><a href=\"../LuckyCache/Cachable.html\">Cachable</a></code> in to <code>T</code>.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"T.class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(key : CacheKey, *, as : T.class, expires_in : Time::Span = LuckyCache.settings.default_duration, &) forall T","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>, *, as : <span class=\"t\">T</span>.<span class=\"k\">class</span>, expires_in : Time::Span = <span class=\"t\">LuckyCache</span>.settings.default_duration, &) forall T","location":{"filename":"src/lucky_cache/stores/memory_store.cr","line_number":62,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/memory_store.cr#L62"},"def":{"name":"fetch","args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"T.class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"splat_index":1,"yields":0,"visibility":"Public","body":"if cache_item = read(key)\n  cache_item.value.as(T)\nelse\n  write(key, expires_in: expires_in) do\n    yield\n  end\nend"}},{"html_id":"flush:Nil-instance-method","name":"flush","doc":"Completely clears all cache keys","summary":"<p>Completely clears all cache keys</p>","abstract":false,"location":{"filename":"src/lucky_cache/stores/memory_store.cr","line_number":42,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/memory_store.cr#L42"},"def":{"name":"flush","return_type":"Nil","visibility":"Public","body":"cache.clear"}},{"html_id":"read(key:CacheKey):CacheItem?-instance-method","name":"read","doc":"Returns the `CacheItem` or nil if the `key` is not found.\nIf the key is found, but the item is expired, it returns nil.","summary":"<p>Returns the <code><a href=\"../LuckyCache/CacheItem.html\">CacheItem</a></code> or nil if the <code>key</code> is not found.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"args_string":"(key : CacheKey) : CacheItem?","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>) : <a href=\"../LuckyCache/CacheItem.html\">CacheItem</a>?","location":{"filename":"src/lucky_cache/stores/memory_store.cr","line_number":11,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/memory_store.cr#L11"},"def":{"name":"read","args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"return_type":"CacheItem | ::Nil","visibility":"Public","body":"if item = cache[key]?\n  item.expired? ? nil : item\nend"}},{"html_id":"write(key:CacheKey,*,expires_in:Time::Span=LuckyCache.settings.default_duration,&)-instance-method","name":"write","doc":"Adds the block value to the `cache`. Returns the block value","summary":"<p>Adds the block value to the <code>cache</code>.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(key : CacheKey, *, expires_in : Time::Span = LuckyCache.settings.default_duration, &)","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>, *, expires_in : Time::Span = <span class=\"t\">LuckyCache</span>.settings.default_duration, &)","location":{"filename":"src/lucky_cache/stores/memory_store.cr","line_number":18,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/memory_store.cr#L18"},"def":{"name":"write","args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"splat_index":1,"yields":0,"visibility":"Public","body":"data = yield\nif data.is_a?(Array)\n  stored_data = [] of Cachable\n  data.each do |d|\n    stored_data << d\n  end\nelse\n  stored_data = data\nend\ncache[key] = CacheItem.new(value: stored_data, expires_in: expires_in)\ndata\n"}}]},{"html_id":"lucky_cache/LuckyCache/NullStore","path":"LuckyCache/NullStore.html","kind":"struct","full_name":"LuckyCache::NullStore","name":"NullStore","abstract":false,"superclass":{"html_id":"lucky_cache/LuckyCache/BaseStore","kind":"struct","full_name":"LuckyCache::BaseStore","name":"BaseStore"},"ancestors":[{"html_id":"lucky_cache/LuckyCache/BaseStore","kind":"struct","full_name":"LuckyCache::BaseStore","name":"BaseStore"},{"html_id":"lucky_cache/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"lucky_cache/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"lucky_cache/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/lucky_cache/stores/null_store.cr","line_number":2,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/null_store.cr#L2"}],"repository_name":"lucky_cache","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"lucky_cache/LuckyCache","kind":"module","full_name":"LuckyCache","name":"LuckyCache"},"instance_methods":[{"html_id":"delete(key:CacheKey)-instance-method","name":"delete","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"args_string":"(key : CacheKey)","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>)","location":{"filename":"src/lucky_cache/stores/null_store.cr","line_number":11,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/null_store.cr#L11"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"visibility":"Public","body":"nil"}},{"html_id":"fetch(key:CacheKey,*,as:Array(T).class,expires_in:Time::Span=LuckyCache.settings.default_duration,&)forallT-instance-method","name":"fetch","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"Array(T).class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(key : CacheKey, *, as : Array(T).class, expires_in : Time::Span = LuckyCache.settings.default_duration, &) forall T","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>, *, as : <span class=\"t\">Array</span>(<span class=\"t\">T</span>).<span class=\"k\">class</span>, expires_in : Time::Span = <span class=\"t\">LuckyCache</span>.settings.default_duration, &) forall T","location":{"filename":"src/lucky_cache/stores/null_store.cr","line_number":19,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/null_store.cr#L19"},"def":{"name":"fetch","args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"Array(T).class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"splat_index":1,"yields":0,"visibility":"Public","body":"yield"}},{"html_id":"fetch(key:CacheKey,*,as:T.class,expires_in:Time::Span=LuckyCache.settings.default_duration,&)forallT-instance-method","name":"fetch","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"T.class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(key : CacheKey, *, as : T.class, expires_in : Time::Span = LuckyCache.settings.default_duration, &) forall T","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>, *, as : <span class=\"t\">T</span>.<span class=\"k\">class</span>, expires_in : Time::Span = <span class=\"t\">LuckyCache</span>.settings.default_duration, &) forall T","location":{"filename":"src/lucky_cache/stores/null_store.cr","line_number":23,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/null_store.cr#L23"},"def":{"name":"fetch","args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"as","external_name":"as","restriction":"T.class"},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"splat_index":1,"yields":0,"visibility":"Public","body":"yield"}},{"html_id":"flush:Nil-instance-method","name":"flush","abstract":false,"location":{"filename":"src/lucky_cache/stores/null_store.cr","line_number":15,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/null_store.cr#L15"},"def":{"name":"flush","return_type":"Nil","visibility":"Public","body":"nil"}},{"html_id":"read(key:CacheKey):CacheItem?-instance-method","name":"read","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"args_string":"(key : CacheKey) : CacheItem?","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>) : <a href=\"../LuckyCache/CacheItem.html\">CacheItem</a>?","location":{"filename":"src/lucky_cache/stores/null_store.cr","line_number":3,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/null_store.cr#L3"},"def":{"name":"read","args":[{"name":"key","external_name":"key","restriction":"CacheKey"}],"return_type":"CacheItem | ::Nil","visibility":"Public","body":"nil"}},{"html_id":"write(key:CacheKey,*,expires_in:Time::Span=LuckyCache.settings.default_duration,&)-instance-method","name":"write","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"args_string":"(key : CacheKey, *, expires_in : Time::Span = LuckyCache.settings.default_duration, &)","args_html":"(key : <a href=\"../LuckyCache/BaseStore/CacheKey.html\">CacheKey</a>, *, expires_in : Time::Span = <span class=\"t\">LuckyCache</span>.settings.default_duration, &)","location":{"filename":"src/lucky_cache/stores/null_store.cr","line_number":7,"url":"https://github.com/luckyframework/lucky_cache/blob/a9e98190b0364d1a49e4f9881709f9cc1da718ab/src/lucky_cache/stores/null_store.cr#L7"},"def":{"name":"write","args":[{"name":"key","external_name":"key","restriction":"CacheKey"},{"name":"","external_name":"","restriction":""},{"name":"expires_in","default_value":"LuckyCache.settings.default_duration","external_name":"expires_in","restriction":"Time::Span"}],"splat_index":1,"yields":0,"visibility":"Public","body":"yield"}}]}]}]}}